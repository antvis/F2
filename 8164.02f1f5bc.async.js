(self.webpackChunk_antv_f2_site=self.webpackChunk_antv_f2_site||[]).push([[8164],{98164:function(t,e,i){"use strict";i.d(e,{WX:function(){return kt},rn:function(){return bt}});var n,s,r,a,o,u,l,h,c,f,d,p,v,y,b,w,k,g,R,m,O,C,S,W,M=i(35118),E=i(35211),_=i(5486),x=i(30702),T=i(97374),U=i(15821),N=i(43400),F=i(420),q=i(4112),P=i(8154),Q=i(61341),I=i(10779),D=i(89904),L=i(20308),j=i(35573),K=i(5770),V=i(35367),A=i(63808),B=i(16286),H=(n=new WeakMap,s=new WeakMap,r=new WeakMap,a=new WeakMap,o=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakSet,k=new WeakSet,g=new WeakSet,R=new WeakSet,m=new WeakSet,O=new WeakSet,C=new WeakSet,S=new WeakSet,W=new WeakSet,function(t){U(i,t);var e=N(i);function i(t,M){var E;return _(this,i),E=e.call(this),F(T(E),W),F(T(E),S),F(T(E),C),F(T(E),O),F(T(E),m),F(T(E),R),F(T(E),g),F(T(E),k),F(T(E),w),q(T(E),n,{writable:!0,value:void 0}),q(T(E),s,{writable:!0,value:void 0}),q(T(E),r,{writable:!0,value:void 0}),q(T(E),a,{writable:!0,value:void 0}),q(T(E),o,{writable:!0,value:void 0}),q(T(E),u,{writable:!0,value:void 0}),q(T(E),l,{writable:!0,value:void 0}),q(T(E),h,{writable:!0,value:void 0}),q(T(E),c,{writable:!0,value:void 0}),q(T(E),f,{writable:!0,value:void 0}),q(T(E),d,{writable:!0,value:void 0}),q(T(E),p,{writable:!0,value:void 0}),q(T(E),v,{writable:!0,value:void 0}),q(T(E),y,{writable:!0,value:void 0}),q(T(E),b,{writable:!0,value:new Set}),E.options=M,I(T(E),n,t),I(T(E),h,null),I(T(E),l,(0,V.O)()),E.bindMethods(),E.setOptions(M),E}return x(i,[{key:"bindMethods",value:function(){this.refetch=this.refetch.bind(this)}},{key:"onSubscribe",value:function(){1===this.listeners.size&&(Q(this,s).addObserver(this),it(Q(this,s),this.options)?P(this,w,z).call(this):this.updateResult(),P(this,m,J).call(this))}},{key:"onUnsubscribe",value:function(){this.hasListeners()||this.destroy()}},{key:"shouldFetchOnReconnect",value:function(){return nt(Q(this,s),this.options,this.options.refetchOnReconnect)}},{key:"shouldFetchOnWindowFocus",value:function(){return nt(Q(this,s),this.options,this.options.refetchOnWindowFocus)}},{key:"destroy",value:function(){this.listeners=new Set,P(this,O,Y).call(this),P(this,C,$).call(this),Q(this,s).removeObserver(this)}},{key:"setOptions",value:function(t){var e=this.options,i=Q(this,s);if(this.options=Q(this,n).defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,A.Nc)(this.options.enabled,Q(this,s)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");P(this,S,tt).call(this),Q(this,s).setOptions(this.options),e._defaulted&&!(0,A.VS)(this.options,e)&&Q(this,n).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,s),observer:this});var r=this.hasListeners();r&&st(Q(this,s),i,this.options,e)&&P(this,w,z).call(this),this.updateResult(),!r||Q(this,s)===i&&(0,A.Nc)(this.options.enabled,Q(this,s))===(0,A.Nc)(e.enabled,Q(this,s))&&(0,A.KC)(this.options.staleTime,Q(this,s))===(0,A.KC)(e.staleTime,Q(this,s))||P(this,k,Z).call(this);var a=P(this,g,G).call(this);!r||Q(this,s)===i&&(0,A.Nc)(this.options.enabled,Q(this,s))===(0,A.Nc)(e.enabled,Q(this,s))&&a===Q(this,y)||P(this,R,X).call(this,a)}},{key:"getOptimisticResult",value:function(t){var e=Q(this,n).getQueryCache().build(Q(this,n),t),i=this.createResult(e,t);return function(t,e){if(!(0,A.VS)(t.getCurrentResult(),e))return!0;return!1}(this,i)&&(I(this,a,i),I(this,u,this.options),I(this,o,Q(this,s).state)),i}},{key:"getCurrentResult",value:function(){return Q(this,a)}},{key:"trackResult",value:function(t,e){var i=this;return new Proxy(t,{get:function(t,n){return i.trackProp(n),null==e||e(n),"promise"===n&&(i.trackProp("data"),i.options.experimental_prefetchInRender||"pending"!==Q(i,l).status||Q(i,l).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,n)}})}},{key:"trackProp",value:function(t){Q(this,b).add(t)}},{key:"getCurrentQuery",value:function(){return Q(this,s)}},{key:"refetch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},(E(t),t));return this.fetch(M({},e))}},{key:"fetchOptimistic",value:function(t){var e=this,i=Q(this,n).defaultQueryOptions(t),s=Q(this,n).getQueryCache().build(Q(this,n),i);return s.fetch().then((function(){return e.createResult(s,i)}))}},{key:"fetch",value:function(t){var e,i=this;return P(this,w,z).call(this,M(M({},t),{},{cancelRefetch:null===(e=t.cancelRefetch)||void 0===e||e})).then((function(){return i.updateResult(),Q(i,a)}))}},{key:"createResult",value:function(t,e){var i,n=this,p=Q(this,s),v=this.options,y=Q(this,a),b=Q(this,o),w=Q(this,u),k=t!==p?t.state:Q(this,r),g=t.state,R=M({},g),m=!1;if(e._optimisticResults){var O=this.hasListeners(),C=!O&&it(t,e),S=O&&st(t,p,e,v);(C||S)&&(R=M(M({},R),(0,j.z)(g.data,t.options))),"isRestoring"===e._optimisticResults&&(R.fetchStatus="idle")}var W=R,E=W.error,_=W.errorUpdatedAt,x=W.status;i=R.data;var T=!1;if(void 0!==e.placeholderData&&void 0===i&&"pending"===x){var U,N;if(null!=y&&y.isPlaceholderData&&e.placeholderData===(null==w?void 0:w.placeholderData))U=y.data,T=!0;else U="function"==typeof e.placeholderData?e.placeholderData(null===(N=Q(this,d))||void 0===N?void 0:N.state.data,Q(this,d)):e.placeholderData;void 0!==U&&(x="success",i=(0,A.oE)(null==y?void 0:y.data,U,e),m=!0)}if(e.select&&void 0!==i&&!T)if(y&&i===(null==b?void 0:b.data)&&e.select===Q(this,c))i=Q(this,f);else try{I(this,c,e.select),i=e.select(i),i=(0,A.oE)(null==y?void 0:y.data,i,e),I(this,f,i),I(this,h,null)}catch(t){I(this,h,t)}Q(this,h)&&(E=Q(this,h),i=Q(this,f),_=Date.now(),x="error");var F="fetching"===R.fetchStatus,q="pending"===x,P="error"===x,D=q&&F,L=void 0!==i,K={status:x,fetchStatus:R.fetchStatus,isPending:q,isSuccess:"success"===x,isError:P,isInitialLoading:D,isLoading:D,data:i,dataUpdatedAt:R.dataUpdatedAt,error:E,errorUpdatedAt:_,failureCount:R.fetchFailureCount,failureReason:R.fetchFailureReason,errorUpdateCount:R.errorUpdateCount,isFetched:R.dataUpdateCount>0||R.errorUpdateCount>0,isFetchedAfterMount:R.dataUpdateCount>k.dataUpdateCount||R.errorUpdateCount>k.errorUpdateCount,isFetching:F,isRefetching:F&&!q,isLoadingError:P&&!L,isPaused:"paused"===R.fetchStatus,isPlaceholderData:m,isRefetchError:P&&L,isStale:rt(t,e),refetch:this.refetch,promise:Q(this,l),isEnabled:!1!==(0,A.Nc)(e.enabled,t)};if(this.options.experimental_prefetchInRender){var B=function(t){"error"===K.status?t.reject(K.error):void 0!==K.data&&t.resolve(K.data)},H=function(){var t=I(n,l,K.promise=(0,V.O)());B(t)},z=Q(this,l);switch(z.status){case"pending":t.queryHash===p.queryHash&&B(z);break;case"fulfilled":"error"!==K.status&&K.data===z.value||H();break;case"rejected":"error"===K.status&&K.error===z.reason||H()}}return K}},{key:"updateResult",value:function(){var t=this,e=Q(this,a),i=this.createResult(Q(this,s),this.options);if(I(this,o,Q(this,s).state),I(this,u,this.options),void 0!==Q(this,o).data&&I(this,d,Q(this,s)),!(0,A.VS)(i,e)){I(this,a,i);P(this,W,et).call(this,{listeners:function(){if(!e)return!0;var i=t.options.notifyOnChangeProps,n="function"==typeof i?i():i;if("all"===n||!n&&!Q(t,b).size)return!0;var s=new Set(null!=n?n:Q(t,b));return t.options.throwOnError&&s.add("error"),Object.keys(Q(t,a)).some((function(i){var n=i;return Q(t,a)[n]!==e[n]&&s.has(n)}))}()})}}},{key:"onQueryUpdate",value:function(){this.updateResult(),this.hasListeners()&&P(this,m,J).call(this)}}]),i}(K.l));function z(t){P(this,S,tt).call(this);var e=Q(this,s).fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(A.ZT)),e}function Z(){var t=this;P(this,O,Y).call(this);var e=(0,A.KC)(this.options.staleTime,Q(this,s));if(!A.sk&&!Q(this,a).isStale&&(0,A.PN)(e)){var i=(0,A.Kp)(Q(this,a).dataUpdatedAt,e)+1;I(this,p,B.mr.setTimeout((function(){Q(t,a).isStale||t.updateResult()}),i))}}function G(){var t;return null!==(t="function"==typeof this.options.refetchInterval?this.options.refetchInterval(Q(this,s)):this.options.refetchInterval)&&void 0!==t&&t}function X(t){var e=this;P(this,C,$).call(this),I(this,y,t),!A.sk&&!1!==(0,A.Nc)(this.options.enabled,Q(this,s))&&(0,A.PN)(Q(this,y))&&0!==Q(this,y)&&I(this,v,B.mr.setInterval((function(){(e.options.refetchIntervalInBackground||D.j.isFocused())&&P(e,w,z).call(e)}),Q(this,y)))}function J(){P(this,k,Z).call(this),P(this,R,X).call(this,P(this,g,G).call(this))}function Y(){Q(this,p)&&(B.mr.clearTimeout(Q(this,p)),I(this,p,void 0))}function $(){Q(this,v)&&(B.mr.clearInterval(Q(this,v)),I(this,v,void 0))}function tt(){var t=Q(this,n).getQueryCache().build(Q(this,n),this.options);if(t!==Q(this,s)){var e=Q(this,s);I(this,s,t),I(this,r,t.state),this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}}function et(t){var e=this;L.Vr.batch((function(){t.listeners&&e.listeners.forEach((function(t){t(Q(e,a))})),Q(e,n).getQueryCache().notify({query:Q(e,s),type:"observerResultsUpdated"})}))}function it(t,e){return function(t,e){return!1!==(0,A.Nc)(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&nt(t,e,e.refetchOnMount)}function nt(t,e,i){if(!1!==(0,A.Nc)(e.enabled,t)&&"static"!==(0,A.KC)(e.staleTime,t)){var n="function"==typeof i?i(t):i;return"always"===n||!1!==n&&rt(t,e)}return!1}function st(t,e,i,n){return(t!==e||!1===(0,A.Nc)(n.enabled,t))&&(!i.suspense||"error"!==t.state.status)&&rt(t,i)}function rt(t,e){return!1!==(0,A.Nc)(e.enabled,t)&&t.isStaleByTime((0,A.KC)(e.staleTime,t))}var at=i(17925),ot=(i(34944),i(60736)),ut=i(77239);i(12996);function lt(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var ht=ot.createContext(lt()),ct=ot.createContext(!1),ft=(ct.Provider,function(t,e,i){return e.fetchOptimistic(t).catch((function(){i.clearReset()}))});function dt(t,e,i){var n,s,r,a;var o=ot.useContext(ct),u=ot.useContext(ht),l=(0,ut.NL)(i),h=l.defaultQueryOptions(t);null===(n=l.getDefaultOptions().queries)||void 0===n||null===(s=n._experimental_beforeQuery)||void 0===s||s.call(n,h);var c=l.getQueryCache().get(h.queryHash);h._optimisticResults=o?"isRestoring":"optimistic",function(t){if(t.suspense){var e=1e3,i=function(t){return"static"===t?t:Math.max(null!=t?t:e,e)},n=t.staleTime;t.staleTime="function"==typeof n?function(){return i(n.apply(void 0,arguments))}:i(n),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,e))}}(h),function(t,e,i){var n=null!=i&&i.state.error&&"function"==typeof t.throwOnError?(0,A.L3)(t.throwOnError,[i.state.error,i]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))}(h,u,c),function(t){ot.useEffect((function(){t.clearReset()}),[t])}(u);var f=!l.getQueryCache().get(h.queryHash),d=ot.useState((function(){return new e(l,h)})),p=at(d,1)[0],v=p.getOptimisticResult(h),y=!o&&!1!==t.subscribed;if(ot.useSyncExternalStore(ot.useCallback((function(t){var e=y?p.subscribe(L.Vr.batchCalls(t)):A.ZT;return p.updateResult(),e}),[p,y]),(function(){return p.getCurrentResult()}),(function(){return p.getCurrentResult()})),ot.useEffect((function(){p.setOptions(h)}),[h,p]),function(t,e){return(null==t?void 0:t.suspense)&&e.isPending}(h,v))throw ft(h,p,u);if(function(t){var e=t.result,i=t.errorResetBoundary,n=t.throwOnError,s=t.query,r=t.suspense;return e.isError&&!i.isReset()&&!e.isFetching&&s&&(r&&void 0===e.data||(0,A.L3)(n,[e.error,s]))}({result:v,errorResetBoundary:u,throwOnError:h.throwOnError,query:c,suspense:h.suspense}))throw v.error;if(null===(r=l.getDefaultOptions().queries)||void 0===r||null===(a=r._experimental_afterQuery)||void 0===a||a.call(r,h,v),h.experimental_prefetchInRender&&!A.sk&&function(t,e){return t.isLoading&&t.isFetching&&!e}(v,o)){var b=f?ft(h,p,u):null==c?void 0:c.promise;null==b||b.catch(A.ZT).finally((function(){p.updateResult()}))}return h.notifyOnChangeProps?v:p.trackResult(v)}function pt(t,e){return dt(t,H,e)}var vt=i(10297);function yt(){return fetch("".concat((0,vt.N1)(),"/antv/products.json")).then((function(t){return t.json()}))}function bt(){return pt({queryKey:["antv-products"],queryFn:yt,staleTime:864e5})}function wt(){return fetch("".concat((0,vt.N1)(),"/antv/config.json")).then((function(t){return t.json()}))}function kt(){return pt({queryKey:["antv-config"],queryFn:wt,initialData:{VisionSnapVersion:"3.5.12",library:["G2","F2","G6"]}})}},35211:function(t){t.exports=function(t){if(null==t)throw new TypeError("Cannot destructure "+t)},t.exports.__esModule=!0,t.exports.default=t.exports}}]);