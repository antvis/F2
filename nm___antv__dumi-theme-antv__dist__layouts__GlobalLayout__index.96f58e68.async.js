"use strict";(self.webpackChunk_antv_f2_site=self.webpackChunk_antv_f2_site||[]).push([[703],{31979:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});var i,r,a,u,s,o,l,c,h,f=n(60736),v=n(85956),d=n(4044),y=n(35118),p=n(17662),g=n(31404),k=n(5486),m=n(30702),b=n(4112),w=n(61341),x=n(10779),P=n(63808),M=n(97374),O=n(15821),Q=n(43400),q=n(35573),A=n(20308),K=n(5770),D=(i=new WeakMap,function(e){O(n,e);var t=Q(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,n),e=t.call(this),b(M(e),i,{writable:!0,value:void 0}),e.config=r,x(M(e),i,new Map),e}return m(n,[{key:"build",value:function(e,t,n){var i,r=t.queryKey,a=null!==(i=t.queryHash)&&void 0!==i?i:(0,P.Rm)(r,t),u=this.get(a);return u||(u=new q.A({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(u)),u}},{key:"add",value:function(e){w(this,i).has(e.queryHash)||(w(this,i).set(e.queryHash,e),this.notify({type:"added",query:e}))}},{key:"remove",value:function(e){var t=w(this,i).get(e.queryHash);t&&(e.destroy(),t===e&&w(this,i).delete(e.queryHash),this.notify({type:"removed",query:e}))}},{key:"clear",value:function(){var e=this;A.Vr.batch((function(){e.getAll().forEach((function(t){e.remove(t)}))}))}},{key:"get",value:function(e){return w(this,i).get(e)}},{key:"getAll",value:function(){return d(w(this,i).values())}},{key:"find",value:function(e){var t=y({exact:!0},e);return this.getAll().find((function(e){return(0,P._x)(t,e)}))}},{key:"findAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getAll();return Object.keys(e).length>0?t.filter((function(t){return(0,P._x)(e,t)})):t}},{key:"notify",value:function(e){var t=this;A.Vr.batch((function(){t.listeners.forEach((function(t){t(e)}))}))}},{key:"onFocus",value:function(){var e=this;A.Vr.batch((function(){e.getAll().forEach((function(e){e.onFocus()}))}))}},{key:"onOnline",value:function(){var e=this;A.Vr.batch((function(){e.getAll().forEach((function(e){e.onOnline()}))}))}}]),n}(K.l)),E=n(420),C=n(8154),T=n(15814),S=n(3344),W=(r=new WeakMap,a=new WeakMap,u=new WeakMap,s=new WeakMap,o=new WeakSet,function(e){O(i,e);var t,n=Q(i);function i(e){var t;return k(this,i),t=n.call(this),E(M(t),o),b(M(t),r,{writable:!0,value:void 0}),b(M(t),a,{writable:!0,value:void 0}),b(M(t),u,{writable:!0,value:void 0}),b(M(t),s,{writable:!0,value:void 0}),x(M(t),r,e.client),t.mutationId=e.mutationId,x(M(t),u,e.mutationCache),x(M(t),a,[]),t.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},t.setOptions(e.options),t.scheduleGc(),t}return m(i,[{key:"setOptions",value:function(e){this.options=e,this.updateGcTime(this.options.gcTime)}},{key:"meta",get:function(){return this.options.meta}},{key:"addObserver",value:function(e){w(this,a).includes(e)||(w(this,a).push(e),this.clearGcTimeout(),w(this,u).notify({type:"observerAdded",mutation:this,observer:e}))}},{key:"removeObserver",value:function(e){x(this,a,w(this,a).filter((function(t){return t!==e}))),this.scheduleGc(),w(this,u).notify({type:"observerRemoved",mutation:this,observer:e})}},{key:"optionalRemove",value:function(){w(this,a).length||("pending"===this.state.status?this.scheduleGc():w(this,u).remove(this))}},{key:"continue",value:function(){var e,t;return null!==(e=null===(t=w(this,s))||void 0===t?void 0:t.continue())&&void 0!==e?e:this.execute(this.state.variables)}},{key:"execute",value:(t=g(p().mark((function e(t){var n,i,a,l,c,h,f,v,d,y,g,k,m,b,P,M,O,Q,q,A,K,D,E,T,W,V,F,H=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(){C(H,o,R).call(H,{type:"continue"})},a={client:w(this,r),meta:this.options.meta,mutationKey:this.options.mutationKey},x(this,s,(0,S.Mz)({fn:function(){return H.options.mutationFn?H.options.mutationFn(t,a):Promise.reject(new Error("No mutationFn found"))},onFail:function(e,t){C(H,o,R).call(H,{type:"failed",failureCount:e,error:t})},onPause:function(){C(H,o,R).call(H,{type:"pause"})},onContinue:i,retry:null!==(n=this.options.retry)&&void 0!==n?n:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:function(){return w(H,u).canRun(H)}})),l="pending"===this.state.status,c=!w(this,s).canStart(),e.prev=5,!l){e.next=10;break}i(),e.next=17;break;case 10:return C(this,o,R).call(this,{type:"pending",variables:t,isPaused:c}),e.next=13,null===(b=(P=w(this,u).config).onMutate)||void 0===b?void 0:b.call(P,t,this,a);case 13:return e.next=15,null===(M=(O=this.options).onMutate)||void 0===M?void 0:M.call(O,t,a);case 15:(Q=e.sent)!==this.state.context&&C(this,o,R).call(this,{type:"pending",context:Q,variables:t,isPaused:c});case 17:return e.next=19,w(this,s).start();case 19:return q=e.sent,e.next=22,null===(h=(f=w(this,u).config).onSuccess)||void 0===h?void 0:h.call(f,q,t,this.state.context,this,a);case 22:return e.next=24,null===(v=(d=this.options).onSuccess)||void 0===v?void 0:v.call(d,q,t,this.state.context,a);case 24:return e.next=26,null===(y=(g=w(this,u).config).onSettled)||void 0===y?void 0:y.call(g,q,null,this.state.variables,this.state.context,this,a);case 26:return e.next=28,null===(k=(m=this.options).onSettled)||void 0===k?void 0:k.call(m,q,null,t,this.state.context,a);case 28:return C(this,o,R).call(this,{type:"success",data:q}),e.abrupt("return",q);case 32:return e.prev=32,e.t0=e.catch(5),e.prev=34,e.next=37,null===(A=(K=w(this,u).config).onError)||void 0===A?void 0:A.call(K,e.t0,t,this.state.context,this,a);case 37:return e.next=39,null===(D=(E=this.options).onError)||void 0===D?void 0:D.call(E,e.t0,t,this.state.context,a);case 39:return e.next=41,null===(T=(W=w(this,u).config).onSettled)||void 0===T?void 0:T.call(W,void 0,e.t0,this.state.variables,this.state.context,this,a);case 41:return e.next=43,null===(V=(F=this.options).onSettled)||void 0===V?void 0:V.call(F,void 0,e.t0,t,this.state.context,a);case 43:throw e.t0;case 44:return e.prev=44,C(this,o,R).call(this,{type:"error",error:e.t0}),e.finish(44);case 47:return e.prev=47,w(this,u).runNext(this),e.finish(47);case 50:case"end":return e.stop()}}),e,this,[[5,32,47,50],[34,,44,47]])}))),function(e){return t.apply(this,arguments)})}]),i}(T.F));function R(e){var t=this;this.state=function(t){switch(e.type){case"failed":return y(y({},t),{},{failureCount:e.failureCount,failureReason:e.error});case"pause":return y(y({},t),{},{isPaused:!0});case"continue":return y(y({},t),{},{isPaused:!1});case"pending":return y(y({},t),{},{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return y(y({},t),{},{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return y(y({},t),{},{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}}(this.state),A.Vr.batch((function(){w(t,a).forEach((function(t){t.onMutationUpdate(e)})),w(t,u).notify({mutation:t,type:"updated",action:e})}))}var V=(l=new WeakMap,c=new WeakMap,h=new WeakMap,function(e){O(n,e);var t=Q(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,n),e=t.call(this),b(M(e),l,{writable:!0,value:void 0}),b(M(e),c,{writable:!0,value:void 0}),b(M(e),h,{writable:!0,value:void 0}),e.config=i,x(M(e),l,new Set),x(M(e),c,new Map),x(M(e),h,0),e}return m(n,[{key:"build",value:function(e,t,n){var i,r=new W({client:e,mutationCache:this,mutationId:x(this,h,(i=w(this,h),++i)),options:e.defaultMutationOptions(t),state:n});return this.add(r),r}},{key:"add",value:function(e){w(this,l).add(e);var t=F(e);if("string"==typeof t){var n=w(this,c).get(t);n?n.push(e):w(this,c).set(t,[e])}this.notify({type:"added",mutation:e})}},{key:"remove",value:function(e){if(w(this,l).delete(e)){var t=F(e);if("string"==typeof t){var n=w(this,c).get(t);if(n)if(n.length>1){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}else n[0]===e&&w(this,c).delete(t)}}this.notify({type:"removed",mutation:e})}},{key:"canRun",value:function(e){var t=F(e);if("string"==typeof t){var n=w(this,c).get(t),i=null==n?void 0:n.find((function(e){return"pending"===e.state.status}));return!i||i===e}return!0}},{key:"runNext",value:function(e){var t=F(e);if("string"==typeof t){var n,i,r=null===(n=w(this,c).get(t))||void 0===n?void 0:n.find((function(t){return t!==e&&t.state.isPaused}));return null!==(i=null==r?void 0:r.continue())&&void 0!==i?i:Promise.resolve()}return Promise.resolve()}},{key:"clear",value:function(){var e=this;A.Vr.batch((function(){w(e,l).forEach((function(t){e.notify({type:"removed",mutation:t})})),w(e,l).clear(),w(e,c).clear()}))}},{key:"getAll",value:function(){return Array.from(w(this,l))}},{key:"find",value:function(e){var t=y({exact:!0},e);return this.getAll().find((function(e){return(0,P.X7)(t,e)}))}},{key:"findAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().filter((function(t){return(0,P.X7)(e,t)}))}},{key:"notify",value:function(e){var t=this;A.Vr.batch((function(){t.listeners.forEach((function(t){t(e)}))}))}},{key:"resumePausedMutations",value:function(){var e=this.getAll().filter((function(e){return e.state.isPaused}));return A.Vr.batch((function(){return Promise.all(e.map((function(e){return e.continue().catch(P.ZT)})))}))}}]),n}(K.l));function F(e){var t;return null===(t=e.options.scope)||void 0===t?void 0:t.id}var H,_,Z,I,j,N,G,X,B=n(89904),Y=n(58005);function z(e){return{onFetch:function(t,n){var i,r,a,u=t.options,s=null===(i=t.fetchOptions)||void 0===i||null===(i=i.meta)||void 0===i||null===(i=i.fetchMore)||void 0===i?void 0:i.direction,o=(null===(r=t.state.data)||void 0===r?void 0:r.pages)||[],l=(null===(a=t.state.data)||void 0===a?void 0:a.pageParams)||[],c={pages:[],pageParams:[]},h=0,f=function(){var n=g(p().mark((function n(){var i,r,a,f,v,d,y,k,m,b;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=!1,r=function(e){Object.defineProperty(e,"signal",{enumerable:!0,get:function(){return t.signal.aborted?i=!0:t.signal.addEventListener("abort",(function(){i=!0})),t.signal}})},a=(0,P.cG)(t.options,t.fetchOptions),f=function(){var e=g(p().mark((function e(n,u,s){var o,l,c,h;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:if(null!=u||!n.pages.length){e.next=4;break}return e.abrupt("return",Promise.resolve(n));case 4:return o=function(){var e={client:t.client,queryKey:t.queryKey,pageParam:u,direction:s?"backward":"forward",meta:t.options.meta};return r(e),e}(),e.next=8,a(o);case 8:return l=e.sent,c=t.options.maxPages,h=s?P.Ht:P.VX,e.abrupt("return",{pages:h(n.pages,l,c),pageParams:h(n.pageParams,u,c)});case 12:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),!s||!o.length){n.next=14;break}return y=((v="backward"===s)?U:L)(u,d={pages:o,pageParams:l}),n.next=11,f(d,y,v);case 11:c=n.sent,n.next=23;break;case 14:k=null!=e?e:o.length;case 15:if(b=0===h?null!==(m=l[0])&&void 0!==m?m:u.initialPageParam:L(u,c),!(h>0&&null==b)){n.next=18;break}return n.abrupt("break",23);case 18:return n.next=20,f(c,b);case 20:c=n.sent,h++;case 22:if(h<k){n.next=15;break}case 23:return n.abrupt("return",c);case 24:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();t.options.persister?t.fetchFn=function(){var e,i;return null===(e=(i=t.options).persister)||void 0===e?void 0:e.call(i,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=f}}}function L(e,t){var n=t.pages,i=t.pageParams,r=n.length-1;return n.length>0?e.getNextPageParam(n[r],n,i[r],i):void 0}function U(e,t){var n,i=t.pages,r=t.pageParams;return i.length>0?null===(n=e.getPreviousPageParam)||void 0===n?void 0:n.call(e,i[0],i,r[0],r):void 0}var J=(H=new WeakMap,_=new WeakMap,Z=new WeakMap,I=new WeakMap,j=new WeakMap,N=new WeakMap,G=new WeakMap,X=new WeakMap,function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,e),b(this,H,{writable:!0,value:void 0}),b(this,_,{writable:!0,value:void 0}),b(this,Z,{writable:!0,value:void 0}),b(this,I,{writable:!0,value:void 0}),b(this,j,{writable:!0,value:void 0}),b(this,N,{writable:!0,value:void 0}),b(this,G,{writable:!0,value:void 0}),b(this,X,{writable:!0,value:void 0}),x(this,H,t.queryCache||new D),x(this,_,t.mutationCache||new V),x(this,Z,t.defaultOptions||{}),x(this,I,new Map),x(this,j,new Map),x(this,N,0)}return m(e,[{key:"mount",value:function(){var e,t=this;x(this,N,(e=w(this,N),e++,e)),1===w(this,N)&&(x(this,G,B.j.subscribe(function(){var e=g(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.next=3,t.resumePausedMutations();case 3:w(t,H).onFocus();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),x(this,X,Y.N.subscribe(function(){var e=g(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.next=3,t.resumePausedMutations();case 3:w(t,H).onOnline();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))}},{key:"unmount",value:function(){var e,t,n;x(this,N,(e=w(this,N),e--,e)),0===w(this,N)&&(null===(t=w(this,G))||void 0===t||t.call(this),x(this,G,void 0),null===(n=w(this,X))||void 0===n||n.call(this),x(this,X,void 0))}},{key:"isFetching",value:function(e){return w(this,H).findAll(y(y({},e),{},{fetchStatus:"fetching"})).length}},{key:"isMutating",value:function(e){return w(this,_).findAll(y(y({},e),{},{status:"pending"})).length}},{key:"getQueryData",value:function(e){var t,n=this.defaultQueryOptions({queryKey:e});return null===(t=w(this,H).get(n.queryHash))||void 0===t?void 0:t.state.data}},{key:"ensureQueryData",value:function(e){var t=this.defaultQueryOptions(e),n=w(this,H).build(this,t),i=n.state.data;return void 0===i?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,P.KC)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}},{key:"getQueriesData",value:function(e){return w(this,H).findAll(e).map((function(e){return[e.queryKey,e.state.data]}))}},{key:"setQueryData",value:function(e,t,n){var i=this.defaultQueryOptions({queryKey:e}),r=w(this,H).get(i.queryHash),a=null==r?void 0:r.state.data,u=(0,P.SE)(t,a);if(void 0!==u)return w(this,H).build(this,i).setData(u,y(y({},n),{},{manual:!0}))}},{key:"setQueriesData",value:function(e,t,n){var i=this;return A.Vr.batch((function(){return w(i,H).findAll(e).map((function(e){var r=e.queryKey;return[r,i.setQueryData(r,t,n)]}))}))}},{key:"getQueryState",value:function(e){var t,n=this.defaultQueryOptions({queryKey:e});return null===(t=w(this,H).get(n.queryHash))||void 0===t?void 0:t.state}},{key:"removeQueries",value:function(e){var t=w(this,H);A.Vr.batch((function(){t.findAll(e).forEach((function(e){t.remove(e)}))}))}},{key:"resetQueries",value:function(e,t){var n=this,i=w(this,H);return A.Vr.batch((function(){return i.findAll(e).forEach((function(e){e.reset()})),n.refetchQueries(y({type:"active"},e),t)}))}},{key:"cancelQueries",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=y({revert:!0},n),r=A.Vr.batch((function(){return w(t,H).findAll(e).map((function(e){return e.cancel(i)}))}));return Promise.all(r).then(P.ZT).catch(P.ZT)}},{key:"invalidateQueries",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A.Vr.batch((function(){var i,r;return w(t,H).findAll(e).forEach((function(e){e.invalidate()})),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():t.refetchQueries(y(y({},e),{},{type:null!==(i=null!==(r=null==e?void 0:e.refetchType)&&void 0!==r?r:null==e?void 0:e.type)&&void 0!==i?i:"active"}),n)}))}},{key:"refetchQueries",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=y(y({},i),{},{cancelRefetch:null===(t=i.cancelRefetch)||void 0===t||t}),a=A.Vr.batch((function(){return w(n,H).findAll(e).filter((function(e){return!e.isDisabled()&&!e.isStatic()})).map((function(e){var t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(P.ZT)),"paused"===e.state.fetchStatus?Promise.resolve():t}))}));return Promise.all(a).then(P.ZT)}},{key:"fetchQuery",value:function(e){var t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);var n=w(this,H).build(this,t);return n.isStaleByTime((0,P.KC)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}},{key:"prefetchQuery",value:function(e){return this.fetchQuery(e).then(P.ZT).catch(P.ZT)}},{key:"fetchInfiniteQuery",value:function(e){return e.behavior=z(e.pages),this.fetchQuery(e)}},{key:"prefetchInfiniteQuery",value:function(e){return this.fetchInfiniteQuery(e).then(P.ZT).catch(P.ZT)}},{key:"ensureInfiniteQueryData",value:function(e){return e.behavior=z(e.pages),this.ensureQueryData(e)}},{key:"resumePausedMutations",value:function(){return Y.N.isOnline()?w(this,_).resumePausedMutations():Promise.resolve()}},{key:"getQueryCache",value:function(){return w(this,H)}},{key:"getMutationCache",value:function(){return w(this,_)}},{key:"getDefaultOptions",value:function(){return w(this,Z)}},{key:"setDefaultOptions",value:function(e){x(this,Z,e)}},{key:"setQueryDefaults",value:function(e,t){w(this,I).set((0,P.Ym)(e),{queryKey:e,defaultOptions:t})}},{key:"getQueryDefaults",value:function(e){var t=d(w(this,I).values()),n={};return t.forEach((function(t){(0,P.to)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)})),n}},{key:"setMutationDefaults",value:function(e,t){w(this,j).set((0,P.Ym)(e),{mutationKey:e,defaultOptions:t})}},{key:"getMutationDefaults",value:function(e){var t=d(w(this,j).values()),n={};return t.forEach((function(t){(0,P.to)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)})),n}},{key:"defaultQueryOptions",value:function(e){if(e._defaulted)return e;var t=y(y(y(y({},w(this,Z).queries),this.getQueryDefaults(e.queryKey)),e),{},{_defaulted:!0});return t.queryHash||(t.queryHash=(0,P.Rm)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===P.CN&&(t.enabled=!1),t}},{key:"defaultMutationOptions",value:function(e){return null!=e&&e._defaulted?e:y(y(y(y({},w(this,Z).mutations),(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{},{_defaulted:!0})}},{key:"clear",value:function(){w(this,H).clear(),w(this,_).clear()}}]),e}()),$=n(77239),ee=n(25368),te=new J,ne=function(){var e=(0,v.useOutlet)();return(0,f.useEffect)((function(){(0,ee.MO)()}),[]),e&&f.createElement($.aH,{client:te},e)}}}]);