(self.webpackChunk_antv_f2_site=self.webpackChunk_antv_f2_site||[]).push([[4514],{24514:function(t,e,n){"use strict";n.d(e,{b:function(){return Nt}});var r=n(60736),i=n(78697),o=n(25987);function a(t){var e=t.type,n=t.title,a=t.desc,u=t.onDelete;return r.createElement("div",{className:i.Z.datasourceCard},r.createElement("img",{src:o.pl[e],alt:e}),r.createElement("div",{className:i.Z.title,title:n},n),a&&r.createElement("div",{className:i.Z.desc},a),u&&r.createElement("img",{className:i.Z.delete,onClick:u,src:"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*xfBPTJxWAjoAAAAAAAAAAAAAeriAAQ/original"}))}var u=n(17034),c=n(32603),l=n(64636),s=n(16667),f=n.n(s),d=n(94632),v=n.n(d),p=n(76458),m=n(16250);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function y(t,e,n){var r;return r=function(t,e){if("object"!=h(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==h(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){var e=t.onClick,n=t.disabled,i=t.tip;return r.createElement(c.Z,{title:n?i:null},r.createElement("img",{className:f()(m.Z.actionBtn,y({},m.Z.disabled,n)),onClick:function(){!n&&e()},src:n?"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*MzQBS6rzlygAAAAAJ8AAAAgAeriAAQ/original":"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*gXFNTJTBx0oAAAAANwAAAAgAeriAAQ/original"}))}var b=n(82532),A=n(98164),w=n(85956),_=n(15911);function E(t){var e,n=t.value,i=t.onChange,o=t.size,a="compact"===(void 0===o?"default":o),u="zh"===(0,w.useLocale)().id?"zh":"en",c=(0,A.r)().data,l=void 0===c?[]:c,s=l.filter((function(t){return t.lang===u&&["G2","F2","S2","G6","X6","AVA"].includes(t.title)})).map((function(t){return{key:t.title,label:t.title,icon:r.createElement("img",{src:t.icon,alt:t.title,className:_.Z.icon}),extra:!a&&t.slogan,onClick:function(){return e=t.title,void(null==i||i(e));var e}}}));(0,w.useIntl)();return r.createElement(b.Z,{menu:{items:s}},r.createElement("button",{type:"button"},r.createElement("img",{className:_.Z.icon,src:(null===(e=l.find((function(t){return t.title===n})))||void 0===e?void 0:e.icon)||"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*7svFR6wkPMoAAAAAAAAAAAAADmJ7AQ/original",alt:"AntV"}),n||!a&&r.createElement(w.FormattedMessage,{id:"ai.chooseLib.placeholder"})))}var S=n(73928);function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j=n(12373),L=n(51148),M=n(55710),T=function(t,e){var n=e.manual,i=e.ready,o=void 0===i||i,a=e.defaultParams,u=void 0===a?[]:a,c=e.refreshDeps,l=void 0===c?[]:c,s=e.refreshDepsAction,f=(0,r.useRef)(!1);return f.current=!1,(0,M.Z)((function(){!n&&o&&(f.current=!0,t.run.apply(t,(0,L.__spreadArray)([],(0,L.__read)(u),!1)))}),[o]),(0,M.Z)((function(){f.current||n||(f.current=!0,s?s():t.refresh())}),(0,L.__spreadArray)([],(0,L.__read)(l),!1)),{onBefore:function(){if(!o)return{stopNow:!0}}}};T.onInit=function(t){var e=t.ready,n=void 0===e||e;return{loading:!t.manual&&n}};var P=T,N=n(72707),C=function(t,e){var n=(0,r.useRef)({deps:e,obj:void 0,initialized:!1}).current;return!1!==n.initialized&&(0,N.Z)(n.deps,e)||(n.deps=e,n.obj=t(),n.initialized=!0),n.obj},O=n(42890),R=new Map,z=new Map,I={},k=function(t,e){return I[t]||(I[t]=[]),I[t].push(e),function(){var n=I[t].indexOf(e);I[t].splice(n,1)}},F=function(t,e){var n=e.cacheKey,i=e.cacheTime,o=void 0===i?3e5:i,a=e.staleTime,u=void 0===a?0:a,c=e.setCache,l=e.getCache,s=(0,r.useRef)(void 0),f=(0,r.useRef)(void 0),d=function(t,e){c?c(e):function(t,e,n){var r=R.get(t);(null==r?void 0:r.timer)&&clearTimeout(r.timer);var i=void 0;e>-1&&(i=setTimeout((function(){R.delete(t)}),e)),R.set(t,(0,L.__assign)((0,L.__assign)({},n),{timer:i}))}(t,o,e),function(t,e){I[t]&&I[t].forEach((function(t){return t(e)}))}(t,e.data)},v=function(t,e){return void 0===e&&(e=[]),l?l(e):function(t){return R.get(t)}(t)};return C((function(){if(n){var e=v(n);e&&Object.hasOwnProperty.call(e,"data")&&(t.state.data=e.data,t.state.params=e.params,(-1===u||Date.now()-e.time<=u)&&(t.state.loading=!1)),s.current=k(n,(function(e){t.setState({data:e})}))}}),[]),(0,O.Z)((function(){var t;null===(t=s.current)||void 0===t||t.call(s)})),n?{onBefore:function(t){var e=v(n,t);return e&&Object.hasOwnProperty.call(e,"data")?-1===u||Date.now()-e.time<=u?{loading:!1,data:null==e?void 0:e.data,error:void 0,returnNow:!0}:{data:null==e?void 0:e.data,error:void 0}:{}},onRequest:function(t,e){var r=function(t){return z.get(t)}(n);return r&&r!==f.current||(r=t.apply(void 0,(0,L.__spreadArray)([],(0,L.__read)(e),!1)),f.current=r,function(t,e){z.set(t,e),e.then((function(e){return z.delete(t),e})).catch((function(){z.delete(t)}))}(n,r)),{servicePromise:r}},onSuccess:function(e,r){var i;n&&(null===(i=s.current)||void 0===i||i.call(s),d(n,{data:e,params:r,time:Date.now()}),s.current=k(n,(function(e){t.setState({data:e})})))},onMutate:function(e){var r;n&&(null===(r=s.current)||void 0===r||r.call(s),d(n,{data:e,params:t.state.params,time:Date.now()}),s.current=k(n,(function(e){t.setState({data:e})})))}}:{}},B=n(40901),D=n.n(B),G=function(t,e){var n=e.debounceWait,i=e.debounceLeading,o=e.debounceTrailing,a=e.debounceMaxWait,u=(0,r.useRef)(void 0),c=(0,r.useMemo)((function(){var t={};return void 0!==i&&(t.leading=i),void 0!==o&&(t.trailing=o),void 0!==a&&(t.maxWait=a),t}),[i,o,a]);return(0,r.useEffect)((function(){if(n){var e=t.runAsync.bind(t);return u.current=D()((function(t){t()}),n,c),t.runAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,r){var i;null===(i=u.current)||void 0===i||i.call(u,(function(){e.apply(void 0,(0,L.__spreadArray)([],(0,L.__read)(t),!1)).then(n).catch(r)}))}))},function(){var n;null===(n=u.current)||void 0===n||n.cancel(),t.runAsync=e}}}),[n,c]),n?{onCancel:function(){var t;null===(t=u.current)||void 0===t||t.cancel()}}:{}},Q=function(t,e){var n=e.loadingDelay,i=e.ready,o=(0,r.useRef)(void 0);if(!n)return{};var a=function(){o.current&&clearTimeout(o.current)};return{onBefore:function(){return a(),!1!==i&&(o.current=setTimeout((function(){t.setState({loading:!0})}),n)),{loading:!1}},onFinally:function(){a()},onCancel:function(){a()}}},H=n(7469);function W(){return!H.Z||"hidden"!==document.visibilityState}var J=new Set;if(H.Z){window.addEventListener("visibilitychange",(function(){W()&&J.forEach((function(t){return t()}))}),!1)}var V=function(t){return J.add(t),function(){J.has(t)&&J.delete(t)}},q=function(t,e){var n=e.pollingInterval,i=e.pollingWhenHidden,o=void 0===i||i,a=e.pollingErrorRetryCount,u=void 0===a?-1:a,c=(0,r.useRef)(void 0),l=(0,r.useRef)(void 0),s=(0,r.useRef)(0),f=function(){var t;c.current&&clearTimeout(c.current),null===(t=l.current)||void 0===t||t.call(l)};return(0,M.Z)((function(){n||f()}),[n]),n?{onBefore:function(){f()},onError:function(){s.current+=1},onSuccess:function(){s.current=0},onFinally:function(){-1===u||-1!==u&&s.current<=u?c.current=setTimeout((function(){o||W()?t.refresh():l.current=V((function(){t.refresh()}))}),n):s.current=0},onCancel:function(){f()}}:{}};var U=function(){return!H.Z||void 0===navigator.onLine||navigator.onLine},K=new Set;if(H.Z){var $=function(){W()&&U()&&K.forEach((function(t){return t()}))};window.addEventListener("visibilitychange",$,!1),window.addEventListener("focus",$,!1)}var Y=function(t){return K.add(t),function(){K.has(t)&&K.delete(t)}},X=function(t,e){var n=e.refreshOnWindowFocus,i=e.focusTimespan,o=void 0===i?5e3:i,a=(0,r.useRef)(void 0),u=function(){var t;null===(t=a.current)||void 0===t||t.call(a)};return(0,r.useEffect)((function(){if(n){var e=(r=t.refresh.bind(t),i=o,c=!1,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,r.apply(void 0,(0,L.__spreadArray)([],(0,L.__read)(t),!1)),setTimeout((function(){c=!1}),i))});a.current=Y((function(){e()}))}var r,i,c;return function(){u()}}),[n,o]),(0,O.Z)((function(){u()})),{}},tt=function(t,e){var n=e.retryInterval,i=e.retryCount,o=(0,r.useRef)(void 0),a=(0,r.useRef)(0),u=(0,r.useRef)(!1);return i?{onBefore:function(){u.current||(a.current=0),u.current=!1,o.current&&clearTimeout(o.current)},onSuccess:function(){a.current=0},onError:function(){if(a.current+=1,-1===i||a.current<=i){var e=null!=n?n:Math.min(1e3*Math.pow(2,a.current),3e4);o.current=setTimeout((function(){u.current=!0,t.refresh()}),e)}else a.current=0},onCancel:function(){a.current=0,o.current&&clearTimeout(o.current)}}:{}},et=n(97554),nt=n.n(et),rt=function(t,e){var n=e.throttleWait,i=e.throttleLeading,o=e.throttleTrailing,a=(0,r.useRef)(void 0),u={};return void 0!==i&&(u.leading=i),void 0!==o&&(u.trailing=o),(0,r.useEffect)((function(){if(n){var e=t.runAsync.bind(t);return a.current=nt()((function(t){t()}),n,u),t.runAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,r){var i;null===(i=a.current)||void 0===i||i.call(a,(function(){e.apply(void 0,(0,L.__spreadArray)([],(0,L.__read)(t),!1)).then(n).catch(r)}))}))},function(){var n;t.runAsync=e,null===(n=a.current)||void 0===n||n.cancel()}}}),[n,i,o]),n?{onCancel:function(){var t;null===(t=a.current)||void 0===t||t.cancel()}}:{}},it=n(34944),ot=n.n(it),at=n(62501),ut=n(93630),ct=n(99434),lt=n(82115),st=function(t){lt.Z&&((0,ct.mf)(t)||console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(ot()(t),'".'))),(0,r.useEffect)((function(){var e=null==t?void 0:t();if(!e||"object"!==ot()(e)||"function"!=typeof e.then)return e}),[])},ft=function(){var t=(0,L.__read)((0,r.useState)({}),2)[1];return(0,r.useCallback)((function(){return t({})}),[])},dt=function(){function t(t,e,n,r){void 0===r&&(r={}),this.serviceRef=t,this.options=e,this.subscribe=n,this.initState=r,this.pluginImpls=[],this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=(0,L.__assign)((0,L.__assign)((0,L.__assign)({},this.state),{loading:!e.manual}),r)}return t.prototype.setState=function(t){void 0===t&&(t={}),this.state=(0,L.__assign)((0,L.__assign)({},this.state),t),this.subscribe()},t.prototype.runPluginHandler=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.pluginImpls.map((function(n){var r;return null===(r=n[t])||void 0===r?void 0:r.call.apply(r,(0,L.__spreadArray)([n],(0,L.__read)(e),!1))})).filter(Boolean);return Object.assign.apply(Object,(0,L.__spreadArray)([{}],(0,L.__read)(r),!1))},t.prototype.runAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,L.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,o,a,u,c,l,s,f,d,v,p,m,h,y,g,b,A,w;return(0,L.__generator)(this,(function(_){switch(_.label){case 0:if(this.count+=1,e=this.count,n=this.runPluginHandler("onBefore",t),r=n.stopNow,i=void 0!==r&&r,o=n.returnNow,a=void 0!==o&&o,u=(0,L.__rest)(n,["stopNow","returnNow"]),i)return[2,new Promise((function(){}))];if(this.setState((0,L.__assign)({loading:!0,params:t},u)),a)return[2,Promise.resolve(u.data)];null===(v=(d=this.options).onBefore)||void 0===v||v.call(d,t),_.label=1;case 1:return _.trys.push([1,3,,4]),(c=this.runPluginHandler("onRequest",this.serviceRef.current,t).servicePromise)||(c=(f=this.serviceRef).current.apply(f,(0,L.__spreadArray)([],(0,L.__read)(t),!1))),[4,c];case 2:return l=_.sent(),e!==this.count?[2,new Promise((function(){}))]:(this.setState({data:l,error:void 0,loading:!1}),null===(m=(p=this.options).onSuccess)||void 0===m||m.call(p,l,t),this.runPluginHandler("onSuccess",l,t),null===(y=(h=this.options).onFinally)||void 0===y||y.call(h,t,l,void 0),e===this.count&&this.runPluginHandler("onFinally",t,l,void 0),[2,l]);case 3:if(s=_.sent(),e!==this.count)return[2,new Promise((function(){}))];throw this.setState({error:s,loading:!1}),null===(b=(g=this.options).onError)||void 0===b||b.call(g,s,t),this.runPluginHandler("onError",s,t),null===(w=(A=this.options).onFinally)||void 0===w||w.call(A,t,void 0,s),e===this.count&&this.runPluginHandler("onFinally",t,void 0,s),s;case 4:return[2]}}))}))},t.prototype.run=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.runAsync.apply(this,(0,L.__spreadArray)([],(0,L.__read)(e),!1)).catch((function(e){t.options.onError||console.error(e)}))},t.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},t.prototype.refresh=function(){this.run.apply(this,(0,L.__spreadArray)([],(0,L.__read)(this.state.params||[]),!1))},t.prototype.refreshAsync=function(){return this.runAsync.apply(this,(0,L.__spreadArray)([],(0,L.__read)(this.state.params||[]),!1))},t.prototype.mutate=function(t){var e=(0,ct.mf)(t)?t(this.state.data):t;this.runPluginHandler("onMutate",e),this.setState({data:e})},t}(),vt=dt;var pt=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=[]);var r=e.manual,i=void 0!==r&&r,o=e.ready,a=void 0===o||o,u=(0,L.__rest)(e,["manual","ready"]);lt.Z&&e.defaultParams&&!Array.isArray(e.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(ot()(e.defaultParams)));var c=(0,L.__assign)({manual:i,ready:a},u),l=(0,at.Z)(t),s=ft(),f=C((function(){var t=n.map((function(t){var e;return null===(e=null==t?void 0:t.onInit)||void 0===e?void 0:e.call(t,c)})).filter(Boolean);return new vt(l,c,s,Object.assign.apply(Object,(0,L.__spreadArray)([{}],(0,L.__read)(t),!1)))}),[]);return f.options=c,f.pluginImpls=n.map((function(t){return t(f,c)})),st((function(){if(!i&&a){var t=f.state.params||e.defaultParams||[];f.run.apply(f,(0,L.__spreadArray)([],(0,L.__read)(t),!1))}})),(0,O.Z)((function(){f.cancel()})),{loading:f.state.loading,data:f.state.data,error:f.state.error,params:f.state.params||[],cancel:(0,ut.Z)(f.cancel.bind(f)),refresh:(0,ut.Z)(f.refresh.bind(f)),refreshAsync:(0,ut.Z)(f.refreshAsync.bind(f)),run:(0,ut.Z)(f.run.bind(f)),runAsync:(0,ut.Z)(f.runAsync.bind(f)),mutate:(0,ut.Z)(f.mutate.bind(f))}};var mt=function(t,e,n){return pt(t,e,(0,L.__spreadArray)((0,L.__spreadArray)([],(0,L.__read)(n||[]),!1),[G,Q,q,X,rt,P,F,tt],!1))};function ht(){ht=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),u=new M(r||[]);return i(a,"_invoke",{value:Z(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",v="executing",p="completed",m={};function h(){}function y(){}function g(){}var b={};l(b,a,(function(){return this}));var A=Object.getPrototypeOf,w=A&&A(A(T([])));w&&w!==n&&r.call(w,a)&&(b=w);var _=g.prototype=h.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,u){var c=f(t[i],t,o);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==bt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function Z(e,n,r){var i=d;return function(o,a){if(i===v)throw new Error("Generator is already running");if(i===p){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var c=x(u,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var l=f(e,n,r);if("normal"===l.type){if(i=r.done?p:"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=p,r.method="throw",r.arg=l.arg)}}}function x(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(bt(e)+" is not iterable")}return y.prototype=g,i(_,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(S.prototype),l(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(s(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function yt(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function gt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){yt(o,r,i,a,u,"next",t)}function u(t){yt(o,r,i,a,u,"throw",t)}a(void 0)}))}}function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}var At=5e3,wt=["csv","json","tsv","txt"],_t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 Bytes";var n=1024,r=e<0?0:e,i=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,o)).toFixed(r))+" "+i[o]};function Et(t,e,n){var r=t.replace(/\r\n/g,"\n").split("\n");if(0===r.length)return n.formatMessage({id:"ai.upload.file.empty"});var i="csv"===e?",":"\t",o=r[0],a=r.slice(1).filter((function(t){return""!==t.trim()})).slice(0,10).join("\n"),u=o.split(i).length,c=r.filter((function(t){return""!==t.trim()})).length;return n.formatMessage({id:"ai.upload.file.table.summary"},{rowCount:c,columnCount:u,header:o,maxLines:10,sampleRows:a})}function St(t,e){if(Array.isArray(t)&&t.length>0&&"object"===bt(t[0])){var n=Object.keys(t[0]),r=t.slice(0,10).map((function(t){return JSON.stringify(t)})).join("\n");return e.formatMessage({id:"ai.upload.file.json.array.summary"},{dataLength:t.length,keys:n.join(", "),maxLines:10,sampleData:r})}return e.formatMessage({id:"ai.upload.file.json.object.summary"})+"\n"+JSON.stringify(t,null,2)}function Zt(){return(Zt=gt(ht().mark((function t(e,n){return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var i=new FileReader;i.onload=function(i){try{var o,a,u=null===(o=i.target)||void 0===o?void 0:o.result;if(u.length<=4e3)a=n.formatMessage({id:"ai.upload.file.full.content"},{fileContent:u});else{var c,l=(null===(c=e.name.split(".").pop())||void 0===c?void 0:c.toLowerCase())||"";if("json"===l){a=St(JSON.parse(u),n)}else{if(!["csv","tsv","txt"].includes(l))return void r(new Error(n.formatMessage({id:"ai.upload.file.parse.type.error"})));a=Et(u,l,n)}a.length>At&&(a=a.substring(0,At)+"\n"+n.formatMessage({id:"ai.upload.file.summary.truncated"}))}t({dataSummary:a,fileMeta:{type:"FILE",fileName:e.name,fileSize:_t(e.size)}})}catch(t){r(new Error(n.formatMessage({id:"ai.upload.file.parse.error"})))}},i.onerror=function(){return r(new Error(n.formatMessage({id:"ai.upload.file.read.error"})))},i.readAsText(e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var xt=function(t){var e=t.onDataAnalyzed,n=t.isCompact,i=t.tooltipText,a=(0,w.useIntl)(),u=mt((function(t){return function(t,e){return Zt.apply(this,arguments)}(t,a)}),{manual:!0,onSuccess:function(t){e(t)},onError:function(t){j.ZP.error(t.message),e({fileMeta:null,dataSummary:""})}}),s=u.run,f=u.loading,d={showUploadList:!1,accept:wt.map((function(t){return".".concat(t)})).join(","),beforeUpload:function(t){var e,n=(null===(e=t.name.split(".").pop())||void 0===e?void 0:e.toLowerCase())||"";return wt.includes(n)?t.size/1024/1024>5?(j.ZP.error(a.formatMessage({id:"ai.upload.file.size.error"},{size:5})),l.Z.LIST_IGNORE):(s(t),!1):(j.ZP.error(a.formatMessage({id:"ai.upload.file.type.error"},{types:wt.join(", ")})),l.Z.LIST_IGNORE)}};return r.createElement(c.Z,{title:n?"".concat(a.formatMessage({id:"ai.upload.data"}),"。").concat(i):i},r.createElement(l.Z,d,r.createElement("button",{type:"button",disabled:f},f?a.formatMessage({id:"ai.upload.analyzing"}):r.createElement(r.Fragment,null,r.createElement("img",{src:o.pl.FILE,alt:"file-icon"})," ",!n&&a.formatMessage({id:"ai.upload.data"})))))};function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Lt(t,e,n){var r;return r=function(t,e){if("object"!=jt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==jt(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Pt={implement:"ai.placeholder.implement",solve:"ai.placeholder.solve"};function Nt(t){var e=t.value,n=t.size,i=t.onChange,s=t.onDataSummaryChange,d=t.onConfirm,m=t.onCancel,h=t.loading,y=t.mode,b=t.lib,A=t.onLibChange,_=t.showAction,x=void 0===_||_,j=(0,w.useIntl)().formatMessage,L=Mt((0,r.useState)(null),2),M=L[0],T=L[1],P=Mt((0,r.useState)(!1),2),N=P[0],C=P[1],O="compact"===n,R=(0,w.useSiteData)().themeConfig,z=function(t){var e=t.texts,n=t.typingSpeed,i=void 0===n?150:n,o=t.pauseDelay,a=void 0===o?2e3:o,u=Z((0,r.useState)(0),2),c=u[0],l=u[1],s=Z((0,r.useState)(0),2),f=s[0],d=s[1];return(0,r.useEffect)((function(){var t=e[c];if(f<t.length){var n=setTimeout((function(){d((function(t){return t+1}))}),i);return function(){return clearTimeout(n)}}var r=setTimeout((function(){l((function(t){return(t+1)%e.length})),d(0)}),a);return function(){return clearTimeout(r)}}),[f,c,e,i,a]),e[c].substring(0,f)}({texts:[j({id:"ai.placeholder.whatis"},{title:R.title}),(0,S.ic)(R.metas.description)]});var I="FILE"!==(null==M?void 0:M.type)&&"IMAGE"!==(null==M?void 0:M.type)||null==M||!M.fileName?null:r.createElement(a,{type:M.type,title:M.fileName,desc:M.fileSize,onDelete:function(){T(null),s&&s("")}}),k=Boolean(e),F=function(){k&&(null==d||d())};return(0,u.Z)("keydown",(function(t){"Enter"===t.key&&(t.shiftKey||t.isComposing||h||(t.preventDefault(),F()))})),r.createElement("div",{className:f()(p.Z.container,Lt(Lt(Lt({},p.Z.active,N),p.Z.compact,O),p.Z.withDatasource,Boolean(I))),style:t.style},I&&r.createElement("div",{className:p.Z.header},I),r.createElement("textarea",{onFocus:function(){return C(!0)},onBlur:function(){return C(!1)},id:"prompt-textarea",className:f()(p.Z.promptTextarea),placeholder:O||R.isAntVSite?j({id:v().get(Pt,y,"ai.placeholder.implement")}):z,value:e,onChange:function(t){i(t.target.value)}}),r.createElement("div",{className:p.Z.footer},r.createElement("div",{className:p.Z.dataActions},x&&r.createElement(r.Fragment,null,r.createElement(E,{value:b,onChange:A,size:n}),y===o.en.implement&&r.createElement(r.Fragment,null,r.createElement(xt,{onDataAnalyzed:function(t){T(t.fileMeta),s&&s(t.dataSummary)},isCompact:O,tooltipText:j({id:"ai.upload.tooltip"})}),r.createElement(c.Z,{title:O?j({id:"ai.upload.image"}):void 0},r.createElement(l.Z,null,r.createElement("button",{type:"button"},r.createElement("img",{src:o.pl.IMAGE})," ",!O&&j({id:"ai.upload.image"}))))))),r.createElement("div",{className:p.Z.actions},h?r.createElement("img",{className:p.Z.actionBtn,onClick:m,src:"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*Yin-QLza5hMAAAAAQBAAAAgAeriAAQ/original"}):r.createElement(g,{onClick:F,disabled:!k,tip:k?void 0:j({id:"ai.msgbox.send.tip"})}))))}},25987:function(t,e,n){"use strict";n.d(e,{DM:function(){return c},Q7:function(){return u},en:function(){return a},pl:function(){return l}});var r=n(72375),i=n(28882),o=n(60736),a={implement:"implement",solve:"solve"},u={implement:{name:"ai.mode.implement",icon:o.createElement(r.Z,null)},solve:{name:"ai.mode.solve",icon:o.createElement(i.Z,null)}},c=[{color:"#5792E6",backgroundColor:"rgba(22,119,255,0.06)"},{color:"#66cf85",backgroundColor:"rgba(44,208,119,0.06)"},{color:"#f99542",backgroundColor:"rgba(231,173,69,0.08)"},{color:"#5761f3",backgroundColor:"rgba(22,55,255,0.06)"}],l={FILE:"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*bc2KQq259ucAAAAAAAAAAAAAeriAAQ/original",IMAGE:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*6I-zQKAmDUsAAAAAQBAAAAgAemJ7AQ/original"}},72375:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(67538),i=n(60736),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},a=n(40196),u=function(t,e){return i.createElement(a.Z,(0,r.Z)((0,r.Z)({},t),{},{ref:e,icon:o}))};var c=i.forwardRef(u)},28882:function(t,e,n){"use strict";var r=n(67538),i=n(60736),o=n(39177),a=n(40196),u=function(t,e){return i.createElement(a.Z,(0,r.Z)((0,r.Z)({},t),{},{ref:e,icon:o.Z}))},c=i.forwardRef(u);e.Z=c},17034:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(62501),i=n(99434),o=n(7469);function a(t,e){if(o.Z)return t?(0,i.mf)(t)?t():"current"in t?t.current:t:e}var u=n(60736),c=n(42890),l=n(72707),s=function(t){return function(e,n,r){var i=(0,u.useRef)(!1),o=(0,u.useRef)([]),s=(0,u.useRef)([]),f=(0,u.useRef)(void 0);t((function(){var t,u=(Array.isArray(r)?r:[r]).map((function(t){return a(t)}));if(!i.current)return i.current=!0,o.current=u,s.current=n,void(f.current=e());u.length===o.current.length&&(0,l.Z)(o.current,u)&&(0,l.Z)(s.current,n)||(null===(t=f.current)||void 0===t||t.call(f),o.current=u,s.current=n,f.current=e())})),(0,c.Z)((function(){var t;null===(t=f.current)||void 0===t||t.call(f),i.current=!1}))}}(u.useEffect);var f=function(t,e,n){void 0===n&&(n={});var i=n.enable,o=void 0===i||i,u=(0,r.Z)(e);s((function(){if(o){var e=a(n.target,window);if(null==e?void 0:e.addEventListener){var r=function(t){return u.current(t)},i=Array.isArray(t)?t:[t];return i.forEach((function(t){e.addEventListener(t,r,{capture:n.capture,once:n.once,passive:n.passive})})),function(){i.forEach((function(t){e.removeEventListener(t,r,{capture:n.capture})}))}}}}),[t,n.capture,n.once,n.passive,o],n.target)}},62501:function(t,e,n){"use strict";var r=n(60736);e.Z=function(t){var e=(0,r.useRef)(t);return e.current=t,e}},93630:function(t,e,n){"use strict";var r=n(34944),i=n.n(r),o=n(60736),a=n(99434),u=n(82115);e.Z=function(t){u.Z&&((0,a.mf)(t)||console.error("useMemoizedFn expected parameter is a function, got ".concat(i()(t))));var e=(0,o.useRef)(t);e.current=(0,o.useMemo)((function(){return t}),[t]);var n=(0,o.useRef)(void 0);return n.current||(n.current=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.current.apply(this,t)}),n.current}},42890:function(t,e,n){"use strict";var r=n(34944),i=n.n(r),o=n(60736),a=n(62501),u=n(99434),c=n(82115);e.Z=function(t){c.Z&&((0,u.mf)(t)||console.error("useUnmount expected parameter is a function, got ".concat(i()(t))));var e=(0,a.Z)(t);(0,o.useEffect)((function(){return function(){e.current()}}),[])}},55710:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(60736),i=function(t){return function(e,n){var i=(0,r.useRef)(!1);t((function(){return function(){i.current=!1}}),[]),t((function(){if(i.current)return e();i.current=!0}),n)}},o=i(r.useEffect)},72707:function(t,e){"use strict";e.Z=function(t,e){if(t===e)return!0;for(var n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0}},99434:function(t,e,n){"use strict";n.d(e,{G7:function(){return i},mf:function(){return r}});n(34944);var r=function(t){return"function"==typeof t},i=function(t){return void 0===t}},7469:function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement);e.Z=n},82115:function(t,e){"use strict";e.Z=!1},97415:function(t,e,n){var r=n(45598),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},45598:function(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},40901:function(t,e,n){var r=n(63169),i=n(90872),o=n(18918),a=Math.max,u=Math.min;t.exports=function(t,e,n){var c,l,s,f,d,v,p=0,m=!1,h=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=c,r=l;return c=l=void 0,p=e,f=t.apply(r,n)}function b(t){return p=t,d=setTimeout(w,e),m?g(t):f}function A(t){var n=t-v;return void 0===v||n>=e||n<0||h&&t-p>=s}function w(){var t=i();if(A(t))return _(t);d=setTimeout(w,function(t){var n=e-(t-v);return h?u(n,s-(t-p)):n}(t))}function _(t){return d=void 0,y&&c?g(t):(c=l=void 0,f)}function E(){var t=i(),n=A(t);if(c=arguments,l=this,v=t,n){if(void 0===d)return b(v);if(h)return clearTimeout(d),d=setTimeout(w,e),g(v)}return void 0===d&&(d=setTimeout(w,e)),f}return e=o(e)||0,r(n)&&(m=!!n.leading,s=(h="maxWait"in n)?a(o(n.maxWait)||0,e):s,y="trailing"in n?!!n.trailing:y),E.cancel=function(){void 0!==d&&clearTimeout(d),p=0,c=v=l=d=void 0},E.flush=function(){return void 0===d?f:_(i())},E}},63169:function(t,e,n){var r=n(34944).default;t.exports=function(t){var e=r(t);return null!=t&&("object"==e||"function"==e)}},90872:function(t,e,n){var r=n(26351);t.exports=function(){return r.Date.now()}},97554:function(t,e,n){var r=n(40901),i=n(63169);t.exports=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:o,maxWait:e,trailing:a})}},18918:function(t,e,n){var r=n(97415),i=n(63169),o=n(66948),a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=u.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}}}]);