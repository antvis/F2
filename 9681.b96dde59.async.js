"use strict";(self.webpackChunk_antv_f2_site=self.webpackChunk_antv_f2_site||[]).push([[9681],{19681:function(e,t,n){n.d(t,{b:function(){return W}});var r=n(60736),i=n(78697),o=n(25987);function a(e){var t=e.type,n=e.title,a=e.desc,u=e.onDelete;return r.createElement("div",{className:i.Z.datasourceCard},r.createElement("img",{src:o.pl[t],alt:t}),r.createElement("div",{className:i.Z.title,title:n},n),a&&r.createElement("div",{className:i.Z.desc},a),u&&r.createElement("img",{className:i.Z.delete,onClick:u,src:"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*xfBPTJxWAjoAAAAAAAAAAAAAeriAAQ/original"}))}var u=function(e){var t=(0,r.useRef)(e);return t.current=e,t},l=n(99434),c=!("undefined"==typeof window||!window.document||!window.document.createElement);function f(e,t){if(c)return e?(0,l.mf)(e)?e():"current"in e?e.current:e:t}var s=n(34944),m=n.n(s),d=n(82115),v=function(e){d.Z&&((0,l.mf)(e)||console.error("useUnmount expected parameter is a function, got ".concat(m()(e))));var t=u(e);(0,r.useEffect)((function(){return function(){t.current()}}),[])};var y=function(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0},p=function(e){return function(t,n,i){var o=(0,r.useRef)(!1),a=(0,r.useRef)([]),u=(0,r.useRef)([]),l=(0,r.useRef)(void 0);e((function(){var e,r=(Array.isArray(i)?i:[i]).map((function(e){return f(e)}));if(!o.current)return o.current=!0,a.current=r,u.current=n,void(l.current=t());r.length===a.current.length&&y(a.current,r)&&y(u.current,n)||(null===(e=l.current)||void 0===e||e.call(l),a.current=r,u.current=n,l.current=t())})),v((function(){var e;null===(e=l.current)||void 0===e||e.call(l),o.current=!1}))}}(r.useEffect);var A=function(e,t,n){void 0===n&&(n={});var r=n.enable,i=void 0===r||r,o=u(t);p((function(){if(i){var t=f(n.target,window);if(null==t?void 0:t.addEventListener){var r=function(e){return o.current(e)},a=Array.isArray(e)?e:[e];return a.forEach((function(e){t.addEventListener(e,r,{capture:n.capture,once:n.once,passive:n.passive})})),function(){a.forEach((function(e){t.removeEventListener(e,r,{capture:n.capture})}))}}}}),[e,n.capture,n.once,n.passive,i],n.target)},b=n(16667),g=n.n(b),h=n(94632),E=n.n(h),S=n(76458),w=n(16250),j=n(22050);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function C(e,t,n){var r;return r=function(e,t){if("object"!=Z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Z(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=e.onClick,n=e.disabled,i=e.tip;return r.createElement(j.Z,{title:n?i:null},r.createElement("img",{className:g()(w.Z.actionBtn,C({},w.Z.disabled,n)),onClick:function(){!n&&t()},src:n?"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*MzQBS6rzlygAAAAAJ8AAAAgAeriAAQ/original":"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*gXFNTJTBx0oAAAAANwAAAAgAeriAAQ/original"}))}var k=n(82532),O=n(98164),x=n(85956),z=n(15911);function I(e){var t,n=e.value,i=e.onChange,o=e.size,a="compact"===(void 0===o?"default":o),u="zh"===(0,x.useLocale)().id?"zh":"en",l=(0,O.rn)().data,c=void 0===l?[]:l,f=(0,O.WX)().data,s=(void 0===f?{library:[]}:f).library,m=void 0===s?[]:s,d=c.filter((function(e){return e.lang===u&&m.map((function(e){return e.toUpperCase()})).includes(e.title)})).map((function(e){return{key:e.title,label:e.title,icon:r.createElement("img",{src:e.icon,alt:e.title,className:z.Z.icon}),extra:!a&&e.slogan,onClick:function(){return t=e.title,void(null==i||i(t));var t}}}));return r.createElement(k.Z,{menu:{items:d}},r.createElement("button",{type:"button"},r.createElement("img",{className:z.Z.icon,src:(null===(t=c.find((function(e){return e.title===n})))||void 0===t?void 0:t.icon)||"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*7svFR6wkPMoAAAAAAAAAAAAADmJ7AQ/original",alt:"AntV"}),n||!a&&r.createElement(x.FormattedMessage,{id:"ai.chooseLib.placeholder"})))}var T=n(73928);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=n(61988),R=n(17625),B=n(27427),D=n(58660);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(){var e=(0,x.useIntl)().formatMessage,t=(0,R.R)(B.cE),n=Object.entries(o.Q7).map((function(t){var n=P(t,2),r=n[0],i=n[1];return{key:r,label:e({id:i.shortName}),icon:i.icon,onClick:function(){return B.cE.mode=r}}}));return r.createElement(k.Z,{menu:{items:n}},r.createElement("button",{type:"button"},r.createElement("a",null,r.createElement(D.Z,null,o.Q7[t.mode].icon,e({id:o.Q7[t.mode].shortName})))))}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function J(e,t,n){var r;return r=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==U(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q={implement:"ai.placeholder.implement",solve:"ai.placeholder.solve"},W=r.memo((function(e){var t=e.value,n=e.size,i=e.onChange,o=e.onDataSummaryChange,u=e.onConfirm,l=e.onCancel,c=e.loading,f=e.showAction,s=void 0===f||f,m=e.showModeSelector,d=void 0!==m&&m,v=(0,R.R)(B.cE),y=(0,R.R)(_.Mz),p=(0,x.useIntl)().formatMessage,b=(0,r.useRef)(null),h=(0,x.useSiteData)().themeConfig;(0,r.useEffect)((function(){h.isAntVSite||v.lib||(B.cE.lib=h.title)}),[h.isAntVSite,h.title]);var w=V((0,r.useState)(null),2),j=w[0],Z=w[1],C=V((0,r.useState)(!1),2),k=C[0],O=C[1],z="compact"===n,Q=function(e){var t=e.texts,n=e.typingSpeed,i=void 0===n?150:n,o=e.pauseDelay,a=void 0===o?2e3:o,u=M((0,r.useState)(0),2),l=u[0],c=u[1],f=M((0,r.useState)(0),2),s=f[0],m=f[1];return(0,r.useEffect)((function(){var e=t[l];if(s<e.length){var n=setTimeout((function(){m((function(e){return e+1}))}),i);return function(){return clearTimeout(n)}}var r=setTimeout((function(){c((function(e){return(e+1)%t.length})),m(0)}),a);return function(){return clearTimeout(r)}}),[s,l,t,i,a]),t[l].substring(0,s)}({texts:[p({id:"ai.placeholder.whatis"},{title:h.title}),(0,T.ic)(h.metas.description)]});var D="FILE"!==(null==j?void 0:j.type)&&"IMAGE"!==(null==j?void 0:j.type)||null==j||!j.fileName?null:r.createElement(a,{type:j.type,title:j.fileName,desc:j.fileSize,onDelete:function(){Z(null),o&&o("")}}),P=Boolean(t),F=function(){P&&(null==u||u())},U=function(){y.isAuthenticated?F():(0,_.m8)(F)};return A("keydown",(function(e){"Enter"===e.key&&(e.shiftKey||e.isComposing||c||(e.preventDefault(),U()))}),{target:b}),r.createElement("div",{className:g()(S.Z.container,J(J(J({},S.Z.active,k),S.Z.compact,z),S.Z.withDatasource,Boolean(D))),style:e.style},D&&r.createElement("div",{className:S.Z.header},D),r.createElement("textarea",{onFocus:function(){return O(!0)},onBlur:function(){return O(!1)},id:"prompt-textarea",className:g()(S.Z.promptTextarea),ref:b,placeholder:z||h.isAntVSite?p({id:E().get(q,v.mode,"ai.placeholder.implement")}):Q,value:t,onChange:function(e){i(e.target.value)}}),r.createElement("div",{className:S.Z.footer},r.createElement("div",{className:S.Z.dataActions},s&&r.createElement(r.Fragment,null,r.createElement(I,{size:n,value:v.lib,onChange:function(e){return B.cE.lib=e}})),d&&r.createElement(r.Fragment,null,r.createElement(L,null))),r.createElement("div",{className:S.Z.actions},c?r.createElement("img",{className:S.Z.actionBtn,onClick:l,src:"https://mdn.alipayobjects.com/huamei_2yzvel/afts/img/A*Yin-QLza5hMAAAAAQBAAAAgAeriAAQ/original"}):r.createElement(N,{onClick:U,disabled:!P,tip:P?void 0:p({id:"ai.msgbox.send.tip"})}))))}))},99434:function(e,t,n){n.d(t,{mf:function(){return r}});n(34944);var r=function(e){return"function"==typeof e}},82115:function(e,t){t.Z=!1}}]);